(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(47)},40:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),l=a.n(c),o=a(13),i=a(7),u=a(27),s=a(28),m=a.n(s),d=a(30);var E=Object(i.c)({isHasData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_HAS_DATA":return t.isHasData;default:return e}},temp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_TEMP_LAST_CITY":var a=e.filter(function(t,a){if(t.location.name!==e[a].location.name)return t;console.log(t.location.name,e[a].location.name,"iffffff")});console.log(a,"result");var n=[].concat(Object(d.a)(e),[t.temp]);return 6===n.length?n.slice(1):n;default:return e}},current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_FETCH_DATA_CURRENT":return t.current;default:return e}},forecast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_FETCH_DATA_FORECAST":return t.forecast;default:return e}},location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_FETCH_DATA_LOCATION":return t.location;default:return e}},condition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_FETCH_DATA_CONDITION":return t.condition;default:return e}},itemsHasErrored:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_HAS_ERRORED":return t.hasErrored;default:return e}},itemsIsLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS_IS_LOADING":return t.isLoading;default:return e}}});a(40);var f=a(9),h=a(10),p=a(15),v=a(11),y=a(14);function g(e){return{type:"ITEMS_IS_LOADING",isLoading:e}}function b(e){return{type:"ITEMS_FETCH_DATA_CURRENT",current:e}}function _(e){return{type:"ITEMS_FETCH_DATA_LOCATION",location:e}}function T(e){return{type:"ITEMS_FETCH_DATA_FORECAST",forecast:e}}function C(e){return{type:"ITEMS_FETCH_DATA_CONDITION",condition:e}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"london";return function(t){t(g(!0)),fetch("http://api.apixu.com/v1/forecast.json?key=ce224de9bc074a68bea221550192103&q=".concat(e,"&days=7")).then(function(e){if(!e.ok)throw Error(e.statusText);return t(g(!1)),e}).then(function(e){return e.json()}).then(function(e){console.log(e),t({type:"IS_HAS_DATA",isHasData:!0}),t({type:"ITEMS_TEMP_LAST_CITY",temp:e}),t(b(e.current)),t(C(e.current.condition)),t(_(e.location)),t(T(e.forecast.forecastday))}).catch(function(){return t({type:"ITEMS_HAS_ERRORED",hasErrored:!0})})}}var O,A=a(12),D=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={inputValue:"",location:[]},a.handleChange=function(e){a.setState({inputValue:e})},a.handleSubmit=function(e){e.preventDefault(),a.props.fetchData(a.state.inputValue),a.setState({inputValue:""})},a.handleChangeCity=function(e){var t=a.props,n=t.temp,r=t.dataLocation,c=t.dataCurrent,l=t.dataForecast,o=t.dataCondition,i=n[e];r(i.location),c(i.current),l(i.forecast.forecastday),o(i.current.condition)},a.getCurrentDay=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth(),n=e.getDate();return new Date(t,a,n).toLocaleString("ru",{weekday:"short"}).toUpperCase()+" "+n+"."+(a+1)},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.current,n=t.location,c=t.hasErrored,l=t.isLoading,o=t.condition,i=t.temp,u=t.isHasData,s=this.state.inputValue;return c?r.a.createElement("p",null,"Sorry! There was an error loading the items"):l?r.a.createElement("p",null,"Loading\u2026"):u?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{type:"text",value:s,onChange:function(t){return e.handleChange(t.target.value)},placeholder:"Enter city:",className:"main-input"}),r.a.createElement("button",{className:"main-button"},"Search"))),r.a.createElement("div",{className:"last-city"},r.a.createElement("span",null,"Last city: "),i.map(function(t,a){return r.a.createElement("span",{onClick:function(){return e.handleChangeCity(a)},key:t.location.name+a},t.location.name)})),r.a.createElement("div",{className:"city"},r.a.createElement(A.b,{to:"forecast-for-5day"},n.name)),r.a.createElement("div",{className:"weather-block"},r.a.createElement("div",{className:"weather-data"},r.a.createElement("div",{className:"wrap-data"},r.a.createElement("div",{className:"date-block"},r.a.createElement("span",null,this.getCurrentDay())),r.a.createElement("div",{className:"temperature"},r.a.createElement("span",null,a.temp_c),r.a.createElement("span",null,"\xb0"))),r.a.createElement("div",{className:"condition"},r.a.createElement("img",{src:o.icon,alt:o.text})),r.a.createElement("table",{className:"table-time"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435"),r.a.createElement("td",null,"\u041c\u0435\u0441\u0442\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,a.last_updated),r.a.createElement("td",null,n.localtime))))),r.a.createElement("div",{className:"table-data"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u0435\u0442\u0440\u0430"),r.a.createElement("td",null,"\u0410\u0442\u043c\u043e\u0441\u0444\u0435\u0440\u043d\u043e\u0435 \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),r.a.createElement("td",null,"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("td",null,"\u041a\u043e\u043b-\u0432\u043e \u043e\u0441\u0430\u0434\u043a\u043e\u0432"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,a.gust_kph," \u043a\u043c/\u0447"),r.a.createElement("td",null,a.pressure_mb," \u043c\u043c \u0440\u0442. \u0441\u0442."),r.a.createElement("td",null,a.humidity," %"),r.a.createElement("td",null,a.precip_mm," \u043c\u043c"))))))):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{type:"text",value:s,onChange:function(t){return e.handleChange(t.target.value)},placeholder:"Enter city:",className:"main-input"}),r.a.createElement("button",{className:"main-button"},"Search")),r.a.createElement("h2",null,"Enter your city:"))}}]),t}(n.Component),I=Object(o.b)(function(e){return{current:e.current,location:e.location,condition:e.condition,hasErrored:e.itemsHasErrored,isLoading:e.itemsIsLoading,temp:e.temp,isHasData:e.isHasData}},function(e){return{fetchData:function(t){return e(S(t))},dataLocation:function(t){return e(_(t))},dataCurrent:function(t){return e(b(t))},dataForecast:function(t){return e(T(t))},dataCondition:function(t){return e(C(t))}}})(D),N=function(e){function t(){return Object(f.a)(this,t),Object(p.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.forecast;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.b,{exact:!0,to:"/"},r.a.createElement("button",null,"back")),e.map(function(e){return r.a.createElement("div",{className:"weather-data",key:e.date},r.a.createElement("div",{className:"wrap-data"},r.a.createElement("div",{className:"date-block"},e.date),r.a.createElement("div",{className:"temperature"},r.a.createElement("span",null,e.day.maxtemp_c),r.a.createElement("span",null,"\xb0"))),r.a.createElement("div",{className:"condition"},r.a.createElement("img",{src:e.day.condition.icon,alt:e.day.condition.text})),r.a.createElement("table",{className:"table-time"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0432\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("td",null,"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u0435\u0442\u0440\u0430"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.day.avghumidity," %"),r.a.createElement("td",null,e.day.maxwind_kph," \u043a\u043c/\u0447")))))}))}}]),t}(n.Component),w=Object(o.b)(function(e){return{current:e.current,location:e.location,condition:e.condition,forecast:e.forecast,hasErrored:e.itemsHasErrored,isLoading:e.itemsIsLoading}},function(e){return{fetchData:function(t){return e(S(t))}}})(N),j=(a(46),a(8)),H=function(e){function t(){return Object(f.a)(this,t),Object(p.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(A.a,null,r.a.createElement("div",{className:"main"},r.a.createElement(j.a,{exact:!0,path:"/",component:I}),r.a.createElement(j.a,{exact:!0,path:"/forecast-for-5day",component:w})))}}]),t}(n.Component),L=Object(i.d)(E,O,Object(i.a)(u.a,m.a));console.log(L.getState()),l.a.render(r.a.createElement(o.a,{store:L},r.a.createElement(H,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.d261c582.chunk.js.map